<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>SIGACC Web - Admin</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>

<body>
    <header>
        <div class="imagen"></div>
        <div class="container">
            <p class="logo">SAC</p>
            <nav>
                {% if admin_logeado %}
                    <a href="/admin-panel">Panel Inicio</a>
                    <a href="/config-page">Configuraci贸n</a>
                    <a href="/">Cerrar Sesi贸n</a>
                {% else %}
                    <a href="#">Soporte</a>
                {% endif %}
            </nav>
        </div>
    </header>

    <section id="principal" style="height: auto; min-height: 80vh; padding-bottom: 50px;">
    <div class="container">
        {% if admin_logeado %}
            <h1 style="text-align: center; margin-bottom: 30px;">Panel de Administraci贸n SAC</h1>

            <details open style="margin-bottom: 20px; background: rgba(255,255,255,0.1); border-radius: 8px;">
                <summary class="titulo-seccion" style="cursor: pointer; list-style: none; display: flex; align-items: center; justify-content: space-between;">
                    <span>Ofertas Acad茅micas</span>
                    <span style="font-size: 0.7em;">(Haz clic para contraer/expandir)</span>
                </summary>
                
                <div style="padding: 15px;">
                    <table class="tabla-datos">
                        <thead>
                            <tr>
                                <th>C贸digo</th>
                                <th>Carrera</th>
                                <th>Cupos Totales</th>
                                <th>Disponibles</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for carrera in carreras %}
                            <tr>
                                <td style="font-family: monospace; font-weight: bold;">{{ carrera.codigo }}</td>
                                <td>{{ carrera.nombre }}</td>
                                <td>{{ carrera.cuposTotales }}</td>
                                <td><strong style="color: #d32f2f;">{{ carrera.cuposDisponibles }}</strong></td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </details>

                <details style="margin-bottom: 20px; background: rgba(255,255,255,0.1); border-radius: 8px;">
                    <summary class="titulo-seccion" style="cursor: pointer; list-style: none; display: flex; align-items: center; justify-content: space-between;">
                        <span>Postulantes Registrados</span>
                        <span style="font-size: 0.7em;">(Haz clic para contraer/expandir)</span>
                    </summary>

                    <div style="padding: 15px;">
                        <table class="tabla-datos">
                            <thead>
                                <tr>
                                    <th>Identificaci贸n</th>
                                    <th>Nombre Completo</th>
                                    <th>Puntaje</th>
                                    <th>Vulnerabilidad</th>
                                    <th>Fecha Registro</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for p in postulantes %}
                                <tr>
                                    <td>{{ p.identificacion }}</td>
                                    <td>{{ p.nombres }} {{ p.apellidos }}</td>
                                    <td style="color: #2e7d32; font-weight: bold;">{{ p.puntaje }}</td>
                                    <td>{{ p.vulnerabilidad }}</td>
                                    <td>{{ p.fecha_inscripcion.strftime('%Y-%m-%d') }}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </details>

                <div style="text-align: center; margin-top: 30px;">
                    <form action="/ejecutar-asignacion" method="POST">
                        <button type="submit" class="btn-logica">
                             Ejecutar Asignaci贸n de Cupos (Art. 51)
                        </button>
                    </form>
                </div>
            {% endif %}
        </div>
    </section>

    <section id="ayuda">
        <div class="container">
            <nav>
                {% if admin_logeado %}

                    <form action="/report-page" method="POST">
                        <button type="submit"> Generar Reportes</button>

                    </form>
                {% else %}
                    <a href="#">Soporte t茅cnico</a>
                    <a href="#">驴Necesitas Ayuda?</a>
                {% endif %}
            </nav>
        </div>
    </section>
</body>
</html>