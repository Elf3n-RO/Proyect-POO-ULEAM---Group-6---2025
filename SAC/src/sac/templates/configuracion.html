<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Configuraci贸n General - SAC</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <style>
        /* Estilos espec铆ficos para las tarjetas de configuraci贸n */
        .config-nav { display: flex; justify-content: center; gap: 20px; margin-bottom: 30px; }
        .config-card { 
            background: rgba(255, 255, 255, 0.9); 
            padding: 25px; 
            border-radius: 15px; 
            color: black; 
            margin-bottom: 20px;
            text-align: left;
        }
        .btn-mini { padding: 5px 10px; font-size: 0.8em; margin-left: 5px; }
        .seccion-titulo { color: white; border-bottom: 2px solid red; display: inline-block; margin-bottom: 20px; }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <p class="logo">SAC</p>
            <nav>
                <a href="{{ url_for('admin_panel') }}">Volver al Panel ]</a>
            </nav>
        </div>
    </header>

    <section id="principal" style="height: auto; padding: 40px 0;">
        <div class="container">
            <h1 style="font-size: 2.5em;">Panel de Configuraci贸n de Sistema</h1>

    <div class="config-card">
        <h2 class="seccion-titulo" style="color: black; border-color: darkred;"> Gesti贸n de Carreras</h2>
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="background: #eee;">
                    <th>Carrera</th>
                    <th>Cupos Totales</th>
                 <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for carrera in carreras %}
            <tr>
                <td>{{ carrera.nombre }}</td>
                <td>
                    <form action="/update-cupos" method="POST" id="form-{{ carrera.codigo }}">
                        <input type="hidden" name="codigo" value="{{ carrera.codigo }}">
                        <input type="number" name="n_cupos" value="{{ carrera.cuposTotales }}" 
                               id="input-{{ carrera.codigo }}" disabled style="width: 60px;">
                        <button type="submit" id="save-{{ carrera.codigo }}" class="btn-mini" 
                                style="background: green; display: none;"> Guardar</button>
                    </form>
                </td>
                <td>
                    <button onclick="habilitarEdicion('{{ carrera.codigo }}')" class="btn-mini" 
                            style="background: orange; color: white; border: none; cursor: pointer;">Editar</button>
                    
                    <a href="/delete-carrera/{{ carrera.codigo }}" class="btn-mini" 
                       onclick="return confirm('驴Est谩 seguro de que desea eliminar la carrera {{ carrera.nombre }}?');"
                       style="text-decoration: none; background: red; color: white; padding: 5px; border-radius: 5px;">Borrar</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <button onclick="mostrarFormularioAlta()" style="margin-top: 15px; background: #333; color: white; cursor: pointer;">+ A帽adir Nueva Carrera</button>

    <div id="form-alta-carrera" style="display: none; margin-top: 20px; border-top: 1px solid #ccc; padding-top: 10px;">
        <form action="/add-carrera" method="POST">
            <input type="text" name="codigo" placeholder="C贸digo (ej: IT-003)" required>
            <input type="text" name="nombre" placeholder="Nombre de la Carrera" required>
            <input type="number" name="cupos" placeholder="Cupos" required>
            <button type="submit" style="background: blue;">Confirmar Alta</button>
        </form>
    </div>
</div>

<script>
function habilitarEdicion(codigo) {
    document.getElementById('input-' + codigo).disabled = false;
    document.getElementById('save-' + codigo).style.display = 'inline-block';
}

function mostrarFormularioAlta() {
    document.getElementById('form-alta-carrera').style.display = 'block';
}
</script>

            <div class="config-card">
                <h2 class="seccion-titulo" style="color: black; border-color: darkred;">锔 Par谩metros de Desempate</h2>
                <form action="/set-desempate" method="POST">
                    <label style="color: #333;">Prioridad de Desempate (Art. 51):</label>
                    <select name="prioridad_desempate" style="width: 100%; padding: 10px; border-radius: 10px; margin: 10px 0;">
                        <option value="vuln" {% if estrategia == 'vulnerabilidad' %}selected{% endif %}>
                            1. ndice de Vulnerabilidad -> 2. Fecha Inscripci贸n
                        </option>
                        
                        <option value="merito" {% if estrategia == 'puntaje' %}selected{% endif %}>
                            1. M茅rito Acad茅mico -> 2. Vulnerabilidad
                        </option>
                    </select>
                    <button type="submit" style="width: auto;">Guardar Preferencia</button>
                </form>
            </div>



        </div>
    </section>

    <footer id="ayuda">
        <div class="container">
            <nav>
                <a href="/manual-admin">Manual de Usuario Admin</a>
            </nav>
        </div>
    </footer>
</body>
</html>